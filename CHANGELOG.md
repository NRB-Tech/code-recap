# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.1.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Added
- **Blog review command** — New `blog review` subcommand for iteratively refining blog posts with user feedback. Supports feedback via `--feedback` flag, `--feedback-file`, or stdin piping.
- **Auto-increment versions** — Review command auto-increments output filenames (`post.md` → `post-v2.md` → `post-v3.md`).
- **Commit-aware file retrieval** — Key files are now retrieved at the commit that last touched them during the analysis period, not just HEAD. Supports `@ before` to get pre-change state and `@ <sha>` for specific commits.

## [1.2.0] - 2026-01-07

### Added
- **Blog post description** — New `-d`/`--description` option for `blog research` and `blog full` commands to provide research context
- **Blog writing instructions** — New `-i`/`--instructions` option for writing guidance (audience, tone, style) that's passed to the write stage
- Pre-commit hooks for ruff linting and formatting

### Changed
- **Streamlined blog research** — Research stage now produces concise commit relevance summaries instead of detailed analysis with code snippets. Also identifies key implementation files.
- **Key files in write stage** — Write stage now retrieves the final state of key implementation files (not just diffs), enabling code examples from the working implementation rather than change history
- **Improved write prompts** — Better guidance for distinguishing general patterns vs app-specific details, and focusing on the final implementation rather than the development journey
- Blog research now fails (exit code 1) when LLM finds no relevant changes for the topic, instead of returning tangentially related content

### Fixed
- Blog research now correctly extracts repository names from structured LLM output (fixes empty `repo:` fields in metadata)
- **S3 deployment provider** — Deploy HTML reports to AWS S3 buckets. Requires AWS CLI.
- **Plugin system for deployment providers** — Create custom providers in separate packages without modifying Code Recap source. Use the `code_recap.deploy_providers` entry point group.
- Documentation split into separate files under `docs/`:
  - `docs/configuration.md` — Configuration reference
  - `docs/commands.md` — Command reference
  - `docs/deployment.md` — Deployment guide
  - `docs/extending.md` — Guide for implementing custom deployment providers

### Changed
- Updated recommended models list with latest versions (GPT-5.2, Claude 4.5, Gemini 3)

## [1.1.1] - 2026-01-06

### Added
- Shared `add_input_dir_arg()` and `add_output_dir_arg()` functions in `arguments.py` for consistent CLI arguments
- `CHANGELOG.md` for tracking version history
- `bump-version.sh` now validates and auto-updates changelog on release

### Changed
- HTML command now uses `--input-dir` and `--output-dir` instead of `-i`/`--input` and `-o`/`--output`
- Deploy command uses `--input-dir` instead of `--input`/`-i`
- `--output-dir` alone now uses that directory as input and outputs to `html/` subdirectory (convenience shorthand)

### Fixed
- CSS variables `--surface` and `--border` replaced with `--bg-card` and `--border-color` (were undefined)
- Deploy `--input-dir` now checks for `html/` subdirectory automatically
- Directory arguments now properly typed as `Path` objects
- `bump-version.sh` now uses proper newlines on macOS (BSD sed compatibility)

## [1.1.0] - 2026-01-06

### Added
- Public-facing summary generation for blog posts and external sharing
- Separate public and internal summary pages in HTML reports
- Smart date range titles (e.g., "2025 Year in Review", "Q3 2025")
- `--fetch` flag (repos are no longer fetched by default)
- Default author from `git config user.name`
- Shared CLI argument definitions in `arguments.py`
- Timeout for git config author lookup to prevent hanging

### Changed
- HTML reports are now generated by default (`--no-html` to disable)
- Reorganized example output directories

### Fixed
- `--temperature` argument was being ignored in `summarize_daily_activity`
- Misleading error handling in `generate_blog_post` author resolution

## [1.0.4] - 2026-01-05

### Changed
- Improved messaging to remind users to load API keys

## [1.0.3] - 2026-01-04

### Added
- `init` command for creating template config.yaml with organization setup

### Fixed
- Python 3.9 compatibility issues

## [1.0.2] - 2026-01-03

### Added
- `init` command for initial setup

### Fixed
- Version bump script improvements

## [1.0.1] - 2026-01-02

### Added
- `bump-version` script for release management

### Changed
- Default to current directory for repository scanning when installed as package

### Fixed
- Version synchronization across package files

## [0.1.0] - 2026-01-01

### Added
- Initial release
- `summarize` command for LLM-powered activity summaries
- `daily` command for daily time logging summaries
- `stats` command for statistics without LLM
- `html` command for HTML report generation
- `blog` command for blog post generation
- `commits` command for listing commits by date
- `deploy` command for deploying reports (zip, Cloudflare Pages)
- Multi-client support with configurable branding
- Chart.js visualizations in HTML reports
- Dark/light theme toggle
- Company override per client for subcontracted work

[Unreleased]: https://github.com/nrbrook/code-recap/compare/v1.2.0...HEAD
[1.2.0]: https://github.com/nrbrook/code-recap/compare/v1.1.1...v1.2.0
[1.1.1]: https://github.com/nrbrook/code-recap/compare/v1.1.0...v1.1.1
[1.1.0]: https://github.com/nrbrook/code-recap/compare/v1.0.4...v1.1.0
[1.0.4]: https://github.com/nrbrook/code-recap/compare/v1.0.3...v1.0.4
[1.0.3]: https://github.com/nrbrook/code-recap/compare/v1.0.2...v1.0.3
[1.0.2]: https://github.com/nrbrook/code-recap/compare/v1.0.1...v1.0.2
[1.0.1]: https://github.com/nrbrook/code-recap/compare/v0.1.0...v1.0.1
[0.1.0]: https://github.com/nrbrook/code-recap/releases/tag/v0.1.0
